# make用法

make只能为slice, map, channel分配内存，并返回一个初始化的值。首先来看下make有以下三种不同的用法：

1. make(map[string]string)

2. make([]int, 2)

3. make([]int, 2, 4)

 

1. 第一种用法，即缺少长度的参数，只传类型，这种用法只能用在类型为map或chan的场景，例如make([]int)是会报错的。这样返回的空间长度都是默认为0的。

2. 第二种用法，指定了长度，例如make([]int, 2)返回的是一个长度为2的slice

3. 第三种用法，第二参数指定的是切片的长度，第三个参数是用来指定预留的空间长度，例如a := make([]int, 2, 4), 这里值得注意的是返回的切片a的总长度是4，预留的意思并不是另外多出来4的长度，其实是包含了前面2个已经切片的个数的。所以举个例子当你这样用的时候 a := make([]int, 4, 2)，就会报语法错误。

因此，当我们为slice分配内存的时候，应当尽量预估到slice可能的最大长度，通过给make传第三个参数的方式来给slice预留好内存空间，这样可以避免二次分配内存带来的开销，大大提高程序的性能。

总结：
make 仅用来分配及初始化类型为 slice、map、chan 的数据。new 可分配任意类型的数据.
new 分配返回的是指针，即类型 *Type。make 返回引用，即 Type.
new 分配的空间被清零, make 分配空间后，会进行初始化.